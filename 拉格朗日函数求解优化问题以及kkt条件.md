# 拉格朗日函数求解最优化问题，KKT条件

### 注：

- KKT 条件是用来求解含有不等式约束的优化问题的一种方法。

- <font color=red> 满足 KKT 条件， 是某点为非线性规划问题的极值点的必要条件（不满足KKT条件必然不是极值点，满足KKT条件但未必是极值点 ）。</font>
- <font color=red>当所求得非线性规划问题是凸规划， 那么 KKT 条件也是充分条件（满足KKT条件则必然是原问题的极值点）。 </font>

### 优化问题求解方法的总结（只考虑凸优化问题）

- 对于无约束的优化问题，直接令梯度等于0求解。
- 对于含有等式约束的优化问题，拉格朗日乘子法，构造拉格朗日函数，令偏导为0求解。
- 对于含有不等式约束的优化问题，同样构造拉格朗日函数，利用KKT条件求解。
- 对于含有约束的优化问题，还可以转化为对偶问题来求解。



### 1. 等式优化问题
$$
\begin{align}
\max\limits_x & \ f(x) \\ 
s.t & \ g(x) = 0 
\end{align}
$$

- 写出对应的拉格朗日函数为：
$$
L(x, u) = f(x) + ug(x)
$$
- 该问题转化为 ：
$$
\max_{x, u} f(x) + ug(x)
$$

- 在求解极值点的时候，我们采用求导的方法
$$
\left\{
\begin{align}
f'(x^*) + ug'(x*) &= 0 \\
g(x^*) &= 0
\end{align}
\right.
$$
第一个等式是对 $x$ 进行求导， 第二个等式是对 $u$ 求导。所以通过该方法求解得到的解，一定是满足原问题的约束条件的，并且其最优解是原问题的最优解。

### 2. 只带有不等式约束的优化问题
$$
\min_x \ f(x) \\
s.t 
\left\{
    \begin{align}
        g_1(x) \leq 0 \\
        g_2(x) \leq 0 \\
        g_3(x) \leq 0
    \end{align}
\right.
$$
- 拉格朗日函数
    $$
    L(x, u) = f(x) + u_1 g_1(x) + u_2g_2(x) + u_3g_3(x)
    $$
	通过拉个朗日函数求得的解需要满足 KKT 条件才是满足原问题的最优解。
	对应的 KKT 条件是：

$$
\left\{
\begin{align}
u_1^*, u_2^*, u_3^* \geq 0 \\
f'(x^*) + u_1^*g_1'(x*) + u_2^*g_2'(x*) + u_3^* g_3'(x^*) = 0 \\
u_1^*g_1(x^*) + u_2^*g(x^*) + u_3^*g(x^*) = 0
\end{align}
\right.
$$

- 对KKT条件的解释。
  - 第二个条件，是为了求拉格朗日函数的极值而设定的。
  - 第三个条件，使得最小的拉格朗日极值点也是 $f(x)$ 的最小值。【互补松紧条件】。
  - 第一个条件，因为加了第一个条件使得可以得到， 

### 3. 既有等式约束又有不等式约束的问题

$$
\min\limits_x  f(x)  \\
s.t\left\{
\begin{align}
	h_i (x) = 0 \\
	g_i (x) \leq 0
\end{align}
\right.
$$

- 广义拉格朗日函数
  $$
  L(x, \lambda, u) = f(x) + \lambda ^T h(x) + u^T g(x) 
  $$

- 对应的 KKT 条件是
  $$
  \left\{
  \begin{align}
     f'(x^*) + \lambda^T h'(x^*) + u^T g'(x^*) &= 0  \\
     h_i(x^*) &= 0 : 原问题自带的约束。 \\
     g_i(x^*) &\leq 0: 原问题自带的约束。 \\
     u_i^* &\geq 0  \\
     u_i^*g_i(x*) &=0
  \end{align}
  \right.
  $$
  